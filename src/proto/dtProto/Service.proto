syntax = "proto3";

package dtproto;

import "dtProto/std_msgs/Header.proto";
import "dtProto/std_msgs/State.proto";
import "dtProto/std_msgs/Request.proto";
import "dtProto/robot_msgs/RobotInfo.proto";
import "dtProto/robot_msgs/MotionControl.proto";
import "dtProto/robot_msgs/MoveControl.proto";
import "dtProto/robot_msgs/JointControl.proto";
import "dtProto/robot_msgs/RobotControl.proto";
import "dtProto/sensor_msgs/Joy.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/wrappers.proto";

service dtService {
    // request server to publish information (server-side streaming)
    rpc PublishState(std_msgs.Request) returns (stream std_msgs.State);

    // request information
    rpc RequestVersion(google.protobuf.Empty) returns (google.protobuf.StringValue);
    rpc RequestRobotInfo(google.protobuf.Empty) returns (robot_msgs.RobotInfo);

    // send command
    rpc Move(robot_msgs.MoveControl) returns (std_msgs.Response);
    rpc MoveJoint(robot_msgs.JointControl) returns (std_msgs.Response);
    rpc Command(robot_msgs.MotionControl) returns (std_msgs.Response);
    rpc RobotCommand(robot_msgs.RobotControlTimeStamped) returns (stream robot_msgs.RobotControlResponse);

    // request server to subscribe client-side streaming information (client-side streaming)
    rpc SubscribeRobotCommand (stream robot_msgs.RobotControlTimeStamped) returns (std_msgs.Response);

    // start bi-directional data streaming
    rpc StreamJoy(stream sensor_msgs.Joy) returns (stream sensor_msgs.Joy);
}